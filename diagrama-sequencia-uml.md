# 📊 Diagrama de Sequência UML - Sistema de Pronto Socorro UESPI

## 1. FLUXO DE CADASTRO DE PACIENTE

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│  Frontend   │    │   API Route │    │  Sistema    │    │  Database   │    │   Fila      │
│ Recepção    │    │ Pacientes   │    │             │    │             │    │             │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
       │                   │                   │                   │                   │
       │ 1. Cadastrar      │                   │                   │                   │
       │ Paciente          │                   │                   │                   │
       │ ──────────────────┼──────────────────►│                   │                   │
       │                   │                   │                   │                   │
       │                   │ 2. Validar Dados  │                   │                   │
       │                   │ ──────────────────┼──────────────────►│                   │
       │                   │                   │                   │                   │
       │                   │ 3. Verificar CPF  │                   │                   │
       │                   │ ──────────────────┼──────────────────►│                   │
       │                   │                   │                   │                   │
       │                   │ 4. CPF Existe?    │                   │                   │
       │                   │ ◄─────────────────┼───────────────────│                   │
       │                   │                   │                   │                   │
       │                   │ 5. Inserir        │                   │                   │
       │                   │ Paciente          │                   │                   │
       │                   │ ──────────────────┼──────────────────►│                   │
       │                   │                   │                   │                   │
       │                   │ 6. Paciente       │                   │                   │
       │                   │ Inserido          │                   │                   │
       │                   │ ◄─────────────────┼───────────────────│                   │
       │                   │                   │                   │                   │
       │                   │ 7. Adicionar      │                   │                   │
       │                   │ à Fila            │                   │                   │
       │                   │ ──────────────────┼───────────────────┼──────────────────►│
       │                   │                   │                   │                   │
       │                   │ 8. Fila           │                   │                   │
       │                   │ Atualizada        │                   │                   │
       │                   │ ◄─────────────────┼───────────────────┼───────────────────│
       │                   │                   │                   │                   │
       │ 9. Sucesso        │                   │                   │                   │
       │ ◄─────────────────┼───────────────────│                   │                   │
       │                   │                   │                   │                   │
```

## 2. FLUXO DE TRIAGEM

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│  Frontend   │    │   API Route │    │  Sistema    │    │  Database   │    │   Fila      │
│  Triagem    │    │   Triagem   │    │             │    │             │    │             │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
       │                   │                   │                   │                   │
       │ 1. Realizar       │                   │                   │                   │
       │ Triagem           │                   │                   │                   │
       │ ──────────────────┼──────────────────►│                   │                   │
       │                   │                   │                   │                   │
       │                   │ 2. Validar        │                   │                   │
       │                   │ Dados             │                   │                   │
       │                   │ ──────────────────┼──────────────────►│                   │
       │                   │                   │                   │                   │
       │                   │ 3. Inserir        │                   │                   │
       │                   │ Triagem           │                   │                   │
       │                   │ ──────────────────┼──────────────────►│                   │
       │                   │                   │                   │                   │
       │                   │ 4. Triagem        │                   │                   │
       │                   │ Inserida          │                   │                   │
       │                   │ ◄─────────────────┼───────────────────│                   │
       │                   │                   │                   │                   │
       │                   │ 5. Atualizar      │                   │                   │
       │                   │ Status da Fila    │                   │                   │
       │                   │ ──────────────────┼───────────────────┼──────────────────►│
       │                   │                   │                   │                   │
       │                   │ 6. Status         │                   │                   │
       │                   │ Atualizado        │                   │                   │
       │                   │ ◄─────────────────┼───────────────────┼───────────────────│
       │                   │                   │                   │                   │
       │ 7. Triagem        │                   │                   │                   │
       │ Concluída         │                   │                   │                   │
       │ ◄─────────────────┼───────────────────│                   │                   │
       │                   │                   │                   │                   │
```

## 3. FLUXO DE CHAMADA DO PRÓXIMO PACIENTE

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│  Frontend   │    │   API Route │    │  Sistema    │    │  Database   │    │  MinHeap    │
│   Médico    │    │   Fila      │    │             │    │             │    │             │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
       │                   │                   │                   │                   │
       │ 1. Chamar         │                   │                   │                   │
       │ Próximo           │                   │                   │                   │
       │ ──────────────────┼──────────────────►│                   │                   │
       │                   │                   │                   │                   │
       │                   │ 2. Buscar Fila    │                   │                   │
       │                   │ Completa          │                   │                   │
       │                   │ ──────────────────┼──────────────────►│                   │
       │                   │                   │                   │                   │
       │                   │ 3. Dados da Fila  │                   │                   │
       │                   │ ◄─────────────────┼───────────────────│                   │
       │                   │                   │                   │                   │
       │                   │ 4. Calcular       │                   │                   │
       │                   │ Prioridades       │                   │                   │
       │                   │ ──────────────────┼───────────────────┼──────────────────►│
       │                   │                   │                   │                   │
       │                   │ 5. Ordenar por    │                   │                   │
       │                   │ Prioridade        │                   │                   │
       │                   │ ──────────────────┼───────────────────┼──────────────────►│
       │                   │                   │                   │                   │
       │                   │ 6. Próximo        │                   │                   │
       │                   │ Paciente          │                   │                   │
       │                   │ ◄─────────────────┼───────────────────┼───────────────────│
       │                   │                   │                   │                   │
       │                   │ 7. Atualizar      │                   │                   │
       │                   │ Status para       │                   │                   │
       │                   │ "em_atendimento"  │                   │                   │
       │                   │ ──────────────────┼──────────────────►│                   │
       │                   │                   │                   │                   │
       │                   │ 8. Status         │                   │                   │
       │                   │ Atualizado        │                   │                   │
       │                   │ ◄─────────────────┼───────────────────│                   │
       │                   │                   │                   │                   │
       │ 9. Paciente       │                   │                   │                   │
       │ Selecionado       │                   │                   │                   │
       │ ◄─────────────────┼───────────────────│                   │                   │
       │                   │                   │                   │                   │
```

## 4. FLUXO DE FINALIZAÇÃO DE ATENDIMENTO

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│  Frontend   │    │   API Route │    │  Sistema    │    │  Database   │
│   Médico    │    │   Fila      │    │             │    │             │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
       │                   │                   │                   │
       │ 1. Finalizar      │                   │                   │
       │ Atendimento       │                   │                   │
       │ ──────────────────┼──────────────────►│                   │
       │                   │                   │                   │
       │                   │ 2. Validar ID     │                   │
       │                   │ da Fila           │                   │
       │                   │ ──────────────────┼──────────────────►│                   │
       │                   │                   │                   │
       │                   │ 3. Buscar         │                   │
       │                   │ Registro da Fila  │                   │
       │                   │ ──────────────────┼──────────────────►│                   │
       │                   │                   │                   │
       │                   │ 4. Dados da Fila  │                   │
       │                   │ ◄─────────────────┼───────────────────│                   │
       │                   │                   │                   │
       │                   │ 5. Atualizar      │                   │
       │                   │ Status para       │                   │
       │                   │ "atendido"        │                   │
       │                   │ ──────────────────┼──────────────────►│                   │
       │                   │                   │                   │
       │                   │ 6. Status         │                   │
       │                   │ Atualizado        │                   │
       │                   │ ◄─────────────────┼───────────────────│                   │
       │                   │                   │                   │
       │ 7. Atendimento    │                   │                   │
       │ Finalizado        │                   │                   │
       │ ◄─────────────────┼───────────────────│                   │
       │                   │                   │                   │
```

## 5. FLUXO DE REMOÇÃO DE PACIENTE

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│  Frontend   │    │   API Route │    │  Sistema    │    │  Database   │    │ Histórico   │
│ Recepção    │    │ Pacientes   │    │             │    │             │    │ Remoções    │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
       │                   │                   │                   │                   │
       │ 1. Remover        │                   │                   │                   │
       │ Paciente          │                   │                   │                   │
       │ ──────────────────┼──────────────────►│                   │                   │
       │                   │                   │                   │                   │
       │                   │ 2. Validar ID     │                   │                   │
       │                   │ e Motivo          │                   │                   │
       │                   │ ──────────────────┼──────────────────►│                   │
       │                   │                   │                   │                   │
       │                   │ 3. Registrar      │                   │                   │
       │                   │ Remoção           │                   │                   │
       │                   │ ──────────────────┼───────────────────┼──────────────────►│
       │                   │                   │                   │                   │
       │                   │ 4. Remoção        │                   │                   │
       │                   │ Registrada        │                   │                   │
       │                   │ ◄─────────────────┼───────────────────┼───────────────────│
       │                   │                   │                   │                   │
       │                   │ 5. Remover da     │                   │                   │
       │                   │ Fila              │                   │                   │
       │                   │ ──────────────────┼──────────────────►│                   │
       │                   │                   │                   │                   │
       │                   │ 6. Remover da     │                   │                   │
       │                   │ Triagem           │                   │                   │
       │                   │ ──────────────────┼──────────────────►│                   │
       │                   │                   │                   │                   │
       │                   │ 7. Paciente       │                   │                   │
       │                   │ Removido          │                   │                   │
       │                   │ ◄─────────────────┼───────────────────│                   │
       │                   │                   │                   │                   │
       │ 8. Remoção        │                   │                   │
       │ Concluída         │                   │                   │
       │ ◄─────────────────┼───────────────────│                   │
       │                   │                   │                   │
```

## 6. FLUXO DE CONSULTA DA FILA

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│  Frontend   │    │   API Route │    │  Sistema    │    │  Database   │    │  MinHeap    │
│   Fila      │    │   Fila      │    │             │    │             │    │             │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
       │                   │                   │                   │                   │
       │ 1. Consultar      │                   │                   │                   │
       │ Fila              │                   │                   │                   │
       │ ──────────────────┼──────────────────►│                   │                   │
       │                   │                   │                   │                   │
       │                   │ 2. Buscar Dados   │                   │                   │
       │                   │ Completos         │                   │                   │
       │                   │ ──────────────────┼──────────────────►│                   │
       │                   │                   │                   │                   │
       │                   │ 3. Dados          │                   │                   │
       │                   │ Recuperados       │                   │                   │
       │                   │ ◄─────────────────┼───────────────────│                   │
       │                   │                   │                   │                   │
       │                   │ 4. Calcular       │                   │                   │
       │                   │ Tempos de Espera  │                   │                   │
       │                   │ ──────────────────┼──────────────────►│                   │
       │                   │                   │                   │                   │
       │                   │ 5. Ordenar por    │                   │                   │
       │                   │ Prioridade        │                   │                   │
       │                   │ ──────────────────┼───────────────────┼──────────────────►│
       │                   │                   │                   │                   │
       │                   │ 6. Fila           │                   │                   │
       │                   │ Ordenada          │                   │                   │
       │                   │ ◄─────────────────┼───────────────────┼───────────────────│
       │                   │                   │                   │                   │
       │ 7. Dados da Fila  │                   │                   │
       │ ◄─────────────────┼───────────────────│                   │                   │
       │                   │                   │                   │                   │
```

## LEGENDA DOS DIAGRAMAS

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                    LEGENDA DOS DIAGRAMAS                                        │
├─────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                 │
│ ──────────────────► : Mensagem síncrona (requisição)                                           │
│ ◄────────────────── : Resposta síncrona                                                        │
│ ─ ─ ─ ─ ─ ─ ─ ─ ─► : Mensagem assíncrona                                                      │
│                                                                                                 │
│ Ator/Componente:                                                                                │
│ - Frontend: Interface do usuário (React/Next.js)                                               │
│ - API Route: Endpoint da API (Next.js API Routes)                                              │
│ - Sistema: Lógica de negócio e processamento                                                   │
│ - Database: Banco de dados SQLite                                                              │
│ - MinHeap: Estrutura de dados para priorização                                                 │
│ - Histórico Remoções: Tabela de auditoria                                                      │
│                                                                                                 │
│ Fluxos Principais:                                                                              │
│ 1. Cadastro: Inserção de novo paciente na fila                                                 │
│ 2. Triagem: Avaliação médica e classificação de risco                                          │
│ 3. Chamada: Seleção do próximo paciente por prioridade                                         │
│ 4. Finalização: Conclusão do atendimento                                                       │
│ 5. Remoção: Exclusão de paciente com registro de motivo                                        │
│ 6. Consulta: Visualização da fila ordenada por prioridade                                      │
│                                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────────────────────┘
``` 